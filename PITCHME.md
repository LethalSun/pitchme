
#IOCP
---
##Overlapped IO 

* 지금까지 배웠던 소켓 통신은 동기방식의 소켓. 즉 IO를 요청하면 완료 될 때까지 기다려야했다.
* 하지만 Overlapped IO 는 입출력작업(네트워크 프로그래밍에서는 소켓)을 요청하고 다른 일을 처리할 수 있다. 
* 다른일을 처리하다 어떤방식으로(이벤트를 이용하거나 특정루틴을 실행하게하거나 IOCP를 이용해서) IO 가 완료되면 IO의 결과를 처리 하는 방식이다.

---
##Overlapped IO 특징

* 다른 소켓 입출력과 다르게 사용자가 지정한 버퍼에 바로 데이터가 입력된다. 즉 커널이 관리하는 버퍼에서 어플리케이션이 사용하는 버퍼로 복사가 필요 없다.
* 하지만 메모리가 부족한 상황에서 커널이 사용하는 메모리 영역이 아니기 때문에 page교체가 일어날수 도 있다.(어플리케이션이 계속 동작을 하기 때문에)
* 그래서 이렇게 입출력이 일어나는 부분을 page교체가 일어나지 않도록 lock을 건다.
* 하지만 이때 무조건 메모리의 page단위로 lock이 걸리기때문에 문제가 될 수 있다.

---
##Overlapped IO 특징

* IO먼저 요청한 입출력이라고 해서 먼저 완료 되지 않는다.
* 즉 빨리 완료 되는 것부터 처리 할수 있으니 효율적일수 있다.

---

##IOCP의 목적

* Overlapped IO 는 비동기적으로 IO를 처리해서 기존의 busy wait로 가능할때마다 입출력을 확인 하는 것을 방지할수 있지만 결국 하나의 스레드로 해결할수 있는 한계가 존재 한다.
* 또 최근에는 코어가 여러개인 CPU가 기본이다.
* 그러면 입출력을 담당하는 여러개의 스레드를 관리 해야 하는데 무조건 스레드가 많다고 좋은것은 아니다. 컨텍스트 교환 비용 때문이다.
* 즉 컨텍스트 교환 비용과 cpu의 이용율을 고려한 최대의 스레드개수를 정해놓고 스레드를 관리하면 cpu를 최대한 효율적으로 사용할수 있다.
* 이것을 잘관리 해주는 것이 IOCP이다.

##스레드의 관리를 위한 IOCP의 구조

* 
